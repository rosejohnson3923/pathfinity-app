| ?column?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| CREATE TABLE achievements (description text NOT NULL, title text NOT NULL, updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), max_times_earnable integer DEFAULT 1, is_repeatable boolean DEFAULT false, tenant_id uuid NOT NULL, is_active boolean DEFAULT true, id uuid NOT NULL DEFAULT gen_random_uuid(), criteria jsonb NOT NULL, points_value integer DEFAULT 0, rarity text DEFAULT 'common'::text, category text NOT NULL, icon text NOT NULL);                                                                                                                                                                                                                                                                                                   |
| CREATE TABLE assessments (completed_at timestamp with time zone, started_at timestamp with time zone, status text DEFAULT 'not_started'::text, skills_topic_id uuid, updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), student_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), assessment_type text NOT NULL, mastery_demonstrated text, questions jsonb NOT NULL, responses jsonb, score_percentage integer, time_taken_minutes integer);                                                                                                                                                                                                                                                                        |
| CREATE TABLE collaboration_spaces (is_archived boolean DEFAULT false, last_activity_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, updated_at timestamp with time zone DEFAULT now(), space_type text NOT NULL, description text, name text NOT NULL, project_id uuid NOT NULL, content jsonb DEFAULT '{}'::jsonb, settings jsonb DEFAULT '{}'::jsonb, created_at timestamp with time zone DEFAULT now());                                                                                                                                                                                                                                                                                                                                  |
| CREATE TABLE content_library (file_urls ARRAY, view_count integer DEFAULT 0, rating_average numeric DEFAULT 0.0, rating_count integer DEFAULT 0, is_published boolean DEFAULT false, published_at timestamp with time zone, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), grade_levels ARRAY, duration_minutes integer, thumbnail_url text, language text DEFAULT 'en'::text, accessibility_features ARRAY, usage_rights text DEFAULT 'internal'::text, title text NOT NULL, description text, content_type text NOT NULL, subject_areas ARRAY, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, creator_id uuid NOT NULL, difficulty_level integer DEFAULT 1, content_data jsonb NOT NULL, metadata jsonb DEFAULT '{}'::jsonb); |
| CREATE TABLE creative_assets (is_public boolean DEFAULT false, is_template boolean DEFAULT false, export_urls jsonb DEFAULT '{}'::jsonb, design_data jsonb NOT NULL, title text NOT NULL, project_id uuid, asset_type text NOT NULL, template_category text, creator_id uuid NOT NULL, preview_url text, description text, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), parent_asset_id uuid, version integer DEFAULT 1, fork_count integer DEFAULT 0, like_count integer DEFAULT 0, view_count integer DEFAULT 0);                                                                                                                                                            |
| CREATE TABLE daily_assignments (estimated_time_minutes integer NOT NULL, status text NOT NULL DEFAULT 'assigned'::text, assigned_tool text NOT NULL, subject text NOT NULL, student_id text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), assignment_date date NOT NULL, skill_id uuid NOT NULL, created_at timestamp with time zone DEFAULT now());                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| CREATE TABLE leaderboard_rankings (points_rank bigint, achievements_rank bigint, streak_rank bigint, full_name text, avatar_url text, grade_level text, user_id uuid, tenant_id uuid, total_points bigint, total_achievements bigint, longest_streak integer);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| CREATE TABLE leaderboards (max_entries integer DEFAULT 100, scope_filter jsonb DEFAULT '{}'::jsonb, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), scope text DEFAULT 'tenant'::text, time_period text DEFAULT 'all_time'::text, name text NOT NULL, description text, leaderboard_type text NOT NULL, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), is_active boolean DEFAULT true);                                                                                                                                                                                                                                                                                                                                          |
| CREATE TABLE learning_paths (created_at timestamp with time zone DEFAULT now(), last_updated timestamp with time zone DEFAULT now(), generated_at timestamp with time zone DEFAULT now(), adaptive_adjustments jsonb DEFAULT '{}'::jsonb, current_position integer DEFAULT 0, path_sequence ARRAY NOT NULL, subject_id uuid NOT NULL, student_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), updated_at timestamp with time zone DEFAULT now(), is_active boolean DEFAULT true);                                                                                                                                                                                                                                                                                     |
| CREATE TABLE lesson_plans (scheduled_date date NOT NULL, time_spent_minutes integer DEFAULT 0, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), status text DEFAULT 'scheduled'::text, lesson_type text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, student_id uuid NOT NULL, skills_topic_id uuid NOT NULL, content jsonb NOT NULL, difficulty_adjustment integer DEFAULT 0, estimated_duration_minutes integer DEFAULT 30, completion_percentage integer DEFAULT 0);                                                                                                                                                                                                                                               |
| CREATE TABLE live_sessions (created_at timestamp with time zone DEFAULT now(), settings jsonb DEFAULT '{}'::jsonb, actual_end timestamp with time zone, actual_start timestamp with time zone, scheduled_end timestamp with time zone NOT NULL, scheduled_start timestamp with time zone NOT NULL, max_participants integer DEFAULT 50, host_id uuid NOT NULL, tenant_id uuid NOT NULL, meeting_url text, meeting_id text, passcode text, status text DEFAULT 'scheduled'::text, recording_url text, title text NOT NULL, description text, session_type text DEFAULT 'class'::text, updated_at timestamp with time zone DEFAULT now(), attendance_count integer DEFAULT 0, id uuid NOT NULL DEFAULT gen_random_uuid(), subject_area text, grade_level text);                                                |
| CREATE TABLE mastery_groups (id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, subject_id uuid NOT NULL, sequence_order integer NOT NULL DEFAULT 1, prerequisites ARRAY, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), description text, grade_level text NOT NULL, name text NOT NULL);                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| CREATE TABLE media_files (updated_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, uploader_id uuid NOT NULL, file_size_bytes bigint NOT NULL, metadata jsonb DEFAULT '{}'::jsonb, download_count integer DEFAULT 0, created_at timestamp with time zone DEFAULT now(), filename text NOT NULL, original_filename text NOT NULL, file_type text NOT NULL, storage_path text NOT NULL, public_url text, thumbnail_url text, processing_status text DEFAULT 'pending'::text, virus_scan_status text DEFAULT 'pending'::text, access_level text DEFAULT 'private'::text);                                                                                                                                                                        |
| CREATE TABLE mentorships (end_date date, mentor_id uuid NOT NULL, project_id uuid, tenant_id uuid NOT NULL, feedback_rating integer, created_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid(), updated_at timestamp with time zone DEFAULT now(), meeting_schedule text, start_date date DEFAULT CURRENT_DATE, goals ARRAY, mentorship_type text DEFAULT 'project'::text, subject_area text NOT NULL, status text DEFAULT 'active'::text, mentee_id uuid NOT NULL);                                                                                                                                                                                                                                                                                                     |
| CREATE TABLE peer_reviews (is_anonymous boolean DEFAULT true, scores jsonb NOT NULL, criteria jsonb NOT NULL, submission_id uuid, reviewee_id uuid NOT NULL, reviewer_id uuid NOT NULL, project_id uuid NOT NULL, tenant_id uuid NOT NULL, comments text, id uuid NOT NULL DEFAULT gen_random_uuid(), updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), submitted_at timestamp with time zone DEFAULT now(), overall_rating integer);                                                                                                                                                                                                                                                                                                                    |
| CREATE TABLE points_transactions (transaction_type text NOT NULL, source_id uuid, source_type text NOT NULL, points_amount integer NOT NULL, user_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), description text NOT NULL, created_at timestamp with time zone DEFAULT now(), metadata jsonb DEFAULT '{}'::jsonb);                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| CREATE TABLE project_members (tenant_id uuid NOT NULL, project_id uuid NOT NULL, user_id uuid NOT NULL, joined_at timestamp with time zone DEFAULT now(), contribution_score integer DEFAULT 0, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), status text DEFAULT 'active'::text, role text DEFAULT 'member'::text, id uuid NOT NULL DEFAULT gen_random_uuid());                                                                                                                                                                                                                                                                                                                                                                                     |
| CREATE TABLE project_submissions (grade_percentage integer, title text NOT NULL, description text, submission_type text NOT NULL, status text DEFAULT 'submitted'::text, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, project_id uuid NOT NULL, submitter_id uuid NOT NULL, content jsonb NOT NULL, feedback jsonb DEFAULT '{}'::jsonb, submitted_at timestamp with time zone DEFAULT now(), reviewed_at timestamp with time zone, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now());                                                                                                                                                                                                                                            |
| CREATE TABLE projects (status text DEFAULT 'draft'::text, skills_gained ARRAY, updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), is_template boolean DEFAULT false, due_date date, start_date date, rubric jsonb, resources jsonb DEFAULT '{}'::jsonb, max_team_size integer DEFAULT 4, estimated_duration_days integer DEFAULT 7, difficulty_level integer DEFAULT 1, creator_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), template_category text, title text NOT NULL, description text, project_type text DEFAULT 'collaborative'::text, subject_areas ARRAY, skills_required ARRAY);                                                                                                                       |
| CREATE TABLE recordings (created_at timestamp with time zone DEFAULT now(), processing_status text DEFAULT 'pending'::text, access_level text DEFAULT 'private'::text, captions_url text, transcript_url text, thumbnail_url text, file_url text NOT NULL, recording_type text NOT NULL, description text, title text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, session_id uuid, creator_id uuid NOT NULL, duration_minutes integer, file_size_bytes bigint, chapters jsonb DEFAULT '[]'::jsonb, view_count integer DEFAULT 0, updated_at timestamp with time zone DEFAULT now());                                                                                                                                                                                      |
| CREATE TABLE rewards (created_at timestamp with time zone DEFAULT now(), metadata jsonb DEFAULT '{}'::jsonb, valid_until date, valid_from date DEFAULT CURRENT_DATE, is_active boolean DEFAULT true, quantity_redeemed integer DEFAULT 0, reward_type text NOT NULL, description text NOT NULL, title text NOT NULL, redemption_instructions text, quantity_available integer, points_cost integer NOT NULL, tenant_id uuid NOT NULL, updated_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid());                                                                                                                                                                                                                                                                        |
| CREATE TABLE session_participants (participation_score integer DEFAULT 0, updated_at timestamp with time zone DEFAULT now(), role text DEFAULT 'participant'::text, created_at timestamp with time zone DEFAULT now(), duration_minutes integer DEFAULT 0, left_at timestamp with time zone, joined_at timestamp with time zone, user_id uuid NOT NULL, session_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid());                                                                                                                                                                                                                                                                                                                                                      |
| CREATE TABLE skills_master (subject text NOT NULL, difficulty_level integer NOT NULL, estimated_time_minutes integer NOT NULL, skill_number text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), skills_cluster text NOT NULL, skills_area text NOT NULL, skill_description text, grade text NOT NULL, created_at timestamp with time zone DEFAULT now(), prerequisites ARRAY, updated_at timestamp with time zone DEFAULT now(), skill_name text NOT NULL);                                                                                                                                                                                                                                                                                                                                           |
| CREATE TABLE skills_topics (name text NOT NULL, description text, learning_objectives ARRAY, updated_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), sequence_order integer NOT NULL DEFAULT 1, estimated_duration_minutes integer DEFAULT 30, difficulty_level integer DEFAULT 1, mastery_group_id uuid NOT NULL, tenant_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid());                                                                                                                                                                                                                                                                                                                                                                       |
| CREATE TABLE streaks (subject_id uuid, current_count integer DEFAULT 0, last_activity_date date, streak_start_date date, created_at timestamp with time zone DEFAULT now(), streak_type text NOT NULL, user_id uuid NOT NULL, is_active boolean DEFAULT true, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, updated_at timestamp with time zone DEFAULT now(), longest_count integer DEFAULT 0);                                                                                                                                                                                                                                                                                                                                                                                      |
| CREATE TABLE student_profiles (is_active boolean NOT NULL DEFAULT true, created_at timestamp with time zone DEFAULT now(), grade_level text NOT NULL, parent_email text, last_name text NOT NULL, school_id text, first_name text NOT NULL, display_name text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, date_of_birth date, updated_at timestamp with time zone DEFAULT now(), enrollment_date date NOT NULL DEFAULT CURRENT_DATE, learning_preferences jsonb DEFAULT '{}'::jsonb);                                                                                                                                                                                                                                                                                       |
| CREATE TABLE student_progress (mastery_level text NOT NULL DEFAULT 'does-not-meet'::text, last_activity_date date, student_id uuid NOT NULL, total_time_spent_minutes integer DEFAULT 0, lessons_completed integer DEFAULT 0, assessments_passed integer DEFAULT 0, created_at timestamp with time zone DEFAULT now(), subject_id uuid NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), progress_percentage integer DEFAULT 0, updated_at timestamp with time zone DEFAULT now(), skills_topic_id uuid, mastery_group_id uuid, streak_days integer DEFAULT 0, tenant_id uuid NOT NULL);                                                                                                                                                                                                                 |
| CREATE TABLE student_skill_progress (score numeric, status text NOT NULL DEFAULT 'not_started'::text, completed_at timestamp with time zone, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), student_id text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), skill_id uuid NOT NULL, attempts integer DEFAULT 0, time_spent_minutes integer DEFAULT 0);                                                                                                                                                                                                                                                                                                                                                                                          |
| CREATE TABLE subjects (grade_levels ARRAY NOT NULL, code text NOT NULL, name text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), tenant_id uuid NOT NULL, is_active boolean DEFAULT true, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), icon text DEFAULT 'book-open'::text, color text DEFAULT '#3B82F6'::text, description text);                                                                                                                                                                                                                                                                                                                                                                                                           |
| CREATE TABLE tenants (domain text, id uuid NOT NULL DEFAULT gen_random_uuid(), subscription_tier text DEFAULT 'basic'::text, name text NOT NULL, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), slug text NOT NULL, max_users integer DEFAULT 100, settings jsonb DEFAULT '{}'::jsonb);                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| CREATE TABLE user_achievements (user_id uuid NOT NULL, updated_at timestamp with time zone DEFAULT now(), tenant_id uuid NOT NULL, achievement_id uuid NOT NULL, progress_data jsonb DEFAULT '{}'::jsonb, times_earned integer DEFAULT 1, created_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid(), earned_at timestamp with time zone DEFAULT now());                                                                                                                                                                                                                                                                                                                                                                                                                  |
| CREATE TABLE user_points_balance (user_id uuid, points_spent bigint, tenant_id uuid, total_points bigint, points_earned bigint);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| CREATE TABLE user_profiles (role text DEFAULT 'student'::text, id uuid NOT NULL, tenant_id uuid NOT NULL, preferences jsonb DEFAULT '{}'::jsonb, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now(), subjects ARRAY, grade_level text, avatar_url text, full_name text NOT NULL, email text NOT NULL);                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| CREATE TABLE user_reward_redemptions (tenant_id uuid NOT NULL, status text DEFAULT 'pending'::text, user_id uuid NOT NULL, reward_id uuid NOT NULL, points_spent integer NOT NULL, redeemed_at timestamp with time zone DEFAULT now(), created_at timestamp with time zone DEFAULT now(), id uuid NOT NULL DEFAULT gen_random_uuid(), updated_at timestamp with time zone DEFAULT now(), fulfillment_notes text);                                                                                                                                                                                                                                                                                                                                                                                            |